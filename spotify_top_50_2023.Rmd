---
title: "Top 50 Tracks Spotify"
output: 
  html_document: 
    keep_md: true
date: "2024-02-29"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
```{r}
library(stringr)
```

```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
library(visdat)
library(here)
library(palmerpenguins)
library(RColorBrewer)
library(paletteer)
``` 

## Load the data
```{r}
spotify2023 <- read_csv("top_50_2023.csv")
```

```{r}
split_spotify2023 <- spotify2023 %>% 
  separate(genres, into = c("genre1", "genre2", "genre3", "genre4", "genre5", "genre6"), sep=",") %>% 
  select(track_name, genre1, genre2, genre3, genre4, genre5, genre6) %>% 
  pivot_longer(-track_name,
               names_to = "type",
               values_to = "class") %>% 
  filter(class != "NA")
```
```{r}
split_spotify2023
```

```{r}
split_spotify2023 %>% 
  str_remove_all(class, "[:punct:]")
  


temp <- str_remove_all(split_spotify2023$class, "[:punct:]")
```


## Clean the data
```{r}
#genre_list <- strsplit(spotify2023$genres, ", ")
#unique_genres <- unique(unlist(genre_list))
#genre_matrix <- matrix(0, nrow = nrow(spotify2023), ncol = length(unique_genres), dimnames = list(NULL, unique_genres))
#for (i in 1:length(genre_list)) {
#  genre_matrix[i, genre_list[[i]]] <- 1
#}
#genre_df <- as.data.frame(genre_matrix)
#spotify2023 <- cbind(spotify2023, genre_df)
```

```{r}
spotify2023 <- spotify2023 %>% 
  separate(album_release_date, into=c("year", "month", "day"), sep="-")
```

```{r}
spotify2023 <- spotify2023 %>% clean_names()
```



